{"version":3,"file":"load.cjs.js","sources":["../../../../../node_modules/@square/web-sdk/dist/load.js"],"sourcesContent":["function findScript(src) {\n    return document.querySelector(`script[src=\"${src}\"]`);\n}\nfunction injectScript(src) {\n    const headOrBody = document.head || document.body;\n    if (!headOrBody) {\n        throw new Error('Square.js requires a <body> or <head> element.');\n    }\n    const script = document.createElement('script');\n    script.src = src;\n    headOrBody.appendChild(script);\n    return script;\n}\nlet loadPromise = null;\nexport function loadSquare(src) {\n    if (loadPromise !== null) {\n        return loadPromise;\n    }\n    loadPromise = new Promise((resolve, reject) => {\n        if (typeof window === 'undefined') {\n            // Resolve to null when imported server side. This makes the module safe to import in an isomorphic code base.\n            resolve(null);\n            return;\n        }\n        if (window.Square) {\n            resolve(window.Square);\n            return;\n        }\n        try {\n            let script = findScript(src);\n            if (!script) {\n                script = injectScript(src);\n            }\n            script.addEventListener('load', () => {\n                if (window.Square) {\n                    resolve(window.Square);\n                }\n                else {\n                    reject(new Error('Square.js failed to load properly.'));\n                }\n            });\n            script.addEventListener('error', () => {\n                reject(new Error('Error occurred while loading Square.js'));\n            });\n        }\n        catch (err) {\n            reject(err);\n        }\n    });\n    return loadPromise;\n}\n//# sourceMappingURL=load.js.map"],"names":[],"mappings":"4GAAA,WAAoB,EAAK,CACrB,MAAO,UAAS,cAAc,eAAe,KAAO,CACxD,CACA,WAAsB,EAAK,CACvB,KAAM,GAAa,SAAS,MAAQ,SAAS,KAC7C,GAAI,CAAC,EACD,KAAM,IAAI,OAAM,gDAAgD,EAEpE,KAAM,GAAS,SAAS,cAAc,QAAQ,EAC9C,SAAO,IAAM,EACb,EAAW,YAAY,CAAM,EACtB,CACX,CACA,GAAI,GAAc,KACX,WAAoB,EAAK,CAC5B,MAAI,KAAgB,MAGpB,GAAc,GAAI,SAAQ,CAAC,EAAS,IAAW,CAC3C,GAAI,MAAO,QAAW,IAAa,CAE/B,EAAQ,IAAI,EACZ,MACH,CACD,GAAI,OAAO,OAAQ,CACf,EAAQ,OAAO,MAAM,EACrB,MACH,CACD,GAAI,CACA,GAAI,GAAS,EAAW,CAAG,EAC3B,AAAK,GACD,GAAS,EAAa,CAAG,GAE7B,EAAO,iBAAiB,OAAQ,IAAM,CAClC,AAAI,OAAO,OACP,EAAQ,OAAO,MAAM,EAGrB,EAAO,GAAI,OAAM,oCAAoC,CAAC,CAE1E,CAAa,EACD,EAAO,iBAAiB,QAAS,IAAM,CACnC,EAAO,GAAI,OAAM,wCAAwC,CAAC,CAC1E,CAAa,CACJ,OACM,EAAP,CACI,EAAO,CAAG,CACb,CACT,CAAK,GACM,CACX"}