"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var z=require("react"),P=require("../../contexts/form/form.cjs.js"),x=require("../../hooks/use-event-listener.cjs.js"),d=require("./ach.styles.cjs.js"),A=require("./ach.utils.cjs.js");function C(t){if(t&&t.__esModule)return t;var o=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});return t&&Object.keys(t).forEach(function(a){if(a!=="default"){var s=Object.getOwnPropertyDescriptor(t,a);Object.defineProperty(o,a,s.get?s:{enumerable:!0,get:function(){return t[a]}})}}),o.default=t,Object.freeze(o)}var e=C(z);function y({accountHolderName:t,redirectURI:o,transactionId:a,callbacks:s,buttonProps:w,children:h,svgProps:E}){const[i,g]=e.useState(()=>{}),[j,m]=e.useState(!1),{cardTokenizeResponseReceived:_,payments:p}=P.useForm(),u=e.useRef(null),O=async n=>{if(n.stopPropagation(),!i){console.warn("ACH button was clicked, but no ACH instance was found.");return}m(!0);try{const r=await i.tokenize({accountHolderName:t});if(r.status==="OK")return await _(r);let l=`Tokenization failed with status: ${r.status}`;if(r?.errors)throw l+=` and errors: ${JSON.stringify(r?.errors)}`,new Error(l);console.warn(l)}catch(r){console.error(r)}finally{m(!1)}};if(e.useEffect(()=>{const n=new AbortController,{signal:r}=n;return(async f=>{const R=await p?.ach({redirectURI:o,transactionId:a}).then(b=>{if(!f?.aborted)return g(b),b});f.aborted&&await R?.destroy()})(r),()=>{n.abort()}},[p]),s)for(const n of Object.keys(s))i?.addEventListener(A.transformPlaidEventName(n),s[n]);x.useEventListener({listener:O,type:"click",element:u,options:{passive:!0}});const{isLoading:S,...v}=w??{},c=S||!i||j;return h?e.createElement(d.PayButton,{...v,"aria-disabled":c,disabled:c,ref:u,type:"button"},h):e.createElement(d.PayButton,{...v,"aria-disabled":c,disabled:c,ref:u,type:"button"},e.createElement(d.SvgIcon,{fill:"none",height:"1em",viewBox:"0 0 36 24",width:"1em",xmlns:"http://www.w3.org/2000/svg",...E},e.createElement("rect",{fill:"url(#prefix__paint0_linear)",height:24,rx:4,width:36}),e.createElement("path",{clipRule:"evenodd",d:"M18.509 6.16a.89.89 0 00-1.018 0l-6.124 4.285a.848.848 0 00-.325.96.873.873 0 00.833.595h1.75v4.286h-1.75a.866.866 0 00-.875.857c0 .473.392.857.875.857h12.25a.866.866 0 00.875-.857.866.866 0 00-.875-.857h-1.75V12h1.75c.38 0 .717-.24.833-.596a.848.848 0 00-.324-.959L18.509 6.16zm2.116 10.126V12h-5.25v4.286h5.25zM18 7.91l3.395 2.376h-6.79L18 7.91z",fill:"#fff",fillRule:"evenodd"}),e.createElement("defs",null,e.createElement("linearGradient",{gradientUnits:"userSpaceOnUse",id:"prefix__paint0_linear",x1:36,x2:0,y1:12,y2:12},e.createElement("stop",{stopColor:"#01D09E"}),e.createElement("stop",{offset:1,stopColor:"#03E4AE"})))),e.createElement("span",null,"Pay with Direct debit (ACH)"))}exports.Ach=y;exports.default=y;
//# sourceMappingURL=ach.cjs.js.map
