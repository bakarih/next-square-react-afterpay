"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var v=require("react"),P=require("../../contexts/form/form.cjs.js");function R(e){if(e&&e.__esModule)return e;var a=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});return e&&Object.keys(e).forEach(function(r){if(r!=="default"){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(a,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}}),a.default=e,Object.freeze(a)}var o=R(v);function A({callbacks:e,id:a="rswps-cash-app-pay",redirectURL:r,referenceId:n,shape:f="round",size:l="medium",values:d="dark",width:m="static",...O}){const[j,q]=o.useState(),{createPaymentRequest:c,payments:p}=P.useForm(),y=o.useMemo(()=>({redirectURL:r||window.location.href,referenceId:n}),[r,n]),b=o.useMemo(()=>{const t={shape:f,size:l,values:d,width:m};return Object.keys(t).reduce((s,i)=>(t[i]!==void 0&&(s[i]=t[i]),s),{})},[f,l,d,m]);if(o.useEffect(()=>{if(!c)throw new Error("`createPaymentRequest()` is required when using digital wallets");const t=new AbortController,{signal:s}=t;return(async w=>{const h=p?.paymentRequest(c);if(!h)throw new Error("`paymentRequest` is required when using digital wallets");try{const u=await p?.cashAppPay(h,y).then(g=>{if(!w?.aborted)return q(g),g});await u?.attach(`#${a}`,b),w.aborted&&await u?.destroy()}catch(u){console.error("Initializing Cash App Pay failed",u)}})(s),()=>{t.abort()}},[c,b,y,p]),e)for(const t of Object.keys(e))j?.addEventListener(t.toLowerCase(),e[t]);return o.createElement("div",{...O,id:a})}exports.default=A;
//# sourceMappingURL=cash-app-pay.cjs.js.map
