"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});var j=require("react"),w=require("../../node_modules/@square/web-sdk/dist/payments.cjs.js"),k=require("../../components/error-screen/error-screen.cjs.js"),P=require("../../hooks/use-dynamic-callback.cjs.js");function S(e){if(e&&e.__esModule)return e;var t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});return e&&Object.keys(e).forEach(function(a){if(a!=="default"){var c=Object.getOwnPropertyDescriptor(e,a);Object.defineProperty(t,a,c.get?c:{enumerable:!0,get:function(){return e[a]}})}}),t.default=e,Object.freeze(t)}var n=S(j);const l=n.createContext({cardTokenizeResponseReceived:null,createPaymentRequest:null,payments:null});function g({applicationId:e,locationId:t,children:a,overrides:c,...o}){const[s,f]=n.useState(),[m]=n.useState(()=>o.createPaymentRequest?.());n.useEffect(()=>{const r=new AbortController,{signal:u}=r;async function b(R){await w.payments(e,t,c).then(i=>{if(i===null)throw new Error("Square Web Payments SDK failed to load");if(!R?.aborted)return f(i),i})}return e&&t&&b(u),()=>{r.abort()}},[e,t]);const d=async r=>{if(r.errors||!o.createVerificationDetails){await o.cardTokenizeResponseReceived(r);return}const u=await s?.verifyBuyer(String(r.token),o.createVerificationDetails());await o.cardTokenizeResponseReceived(r,u)},y=P.useDynamicCallback(d);if(!e||!t)return n.createElement(k.default,null);if(!s)return null;const v={cardTokenizeResponseReceived:y,createPaymentRequest:m,payments:s};return n.createElement(l.Provider,{value:v},a)}const q=()=>{const e=n.useContext(l);if(e===void 0)throw new Error("useForm must be used within a FormProvider");return e};exports.FormContext=l;exports.default=g;exports.useForm=q;
//# sourceMappingURL=form.cjs.js.map
